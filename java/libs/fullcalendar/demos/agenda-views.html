<!DOCTYPE html>
<!-- for dokumentasjon se: http://arshaw.com/fullcalendar/docs/ -->

<html>
	<head>
		<meta charset="UTF-8">
		<link href='../fullcalendar/fullcalendar.css' rel='stylesheet' />
		<link href='../fullcalendar/fullcalendar.print.css' rel='stylesheet' media='print' />
		<script src='../lib/jquery.min.js'></script>
		<script src='../lib/jquery-ui.custom.min.js'></script>
		<script src='../fullcalendar/fullcalendar.min.js'></script>
		<script>

			$(document).ready(function() {
				var lastClicked;
				var userId;


				var date = new Date();
				var d = date.getDate();
				var m = date.getMonth();
				var y = date.getFullYear();
				
				var events = [];

				$('#calendar').fullCalendar({
					header: {
						left: 'prev,next today',
						center: 'title',
						right: 'month,agendaWeek,agendaDay'
					},
					editable: false,
					events: events,
					allDaySlot: false,

					eventClick: function(calEvent, jsEvent, view) {

				        //Remove old selections box shadow
				        if ('null' != lastClicked) {
				        	$(lastClicked).css('box-shadow','');
				        }

				        //On eventClick set box shadow for current selection
				        $(this).css({
				        	'box-shadow' : '7px 7px 5px 0px #888'

				        });
				        lastClicked = this;

				        //CallBack to JavaFX with event ID
				        app.onClickIDtoJavaFX(calEvent.id);

				    }
				    

				});

				$('#calendar').fullCalendar('changeView', 'agendaWeek');
			});

		</script>
		<script type="text/javascript">
			
			function createEventSourceObject(id, title, startDate, endDate, ownerId, changed, attending, myEvent) {
				if (ownerId == userId) {
					var event = [{
								id: id,
								title: title,
								start: startDate,
								end: endDate,
								allDay: false,
								backgroundColor: '#EAB7AD',
								borderColor: '#E88B79'
							}];
				} else {
					var event = [{
								id: id,
								title: title,
								start: startDate,
								end: endDate,
								allDay: false
							}];
				}

				return event;
			}


			function addEvent(id, title, startDate, endDate, ownerId, changed, attending, myEvent) {
				var newEvent = createEventSourceObject(id, title, startDate, endDate, ownerId, changed, attending, myEvent);
				$('#calendar').fullCalendar('addEventSource', newEvent);
			}

			function setUserId(id) {
				userId = id;
			}

			function removeAllEvents() {
				$('#calendar').fullCalendar('removeEvents');
			}

		</script>
		<style>

			body {
				margin-top: 40px;
				text-align: center;
				font-size: 14px;
				font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
			}

			#calendar {
				margin: 0 auto;
				width: 100%;
				height: 100%;
			}

		</style>
	</head>
	<body>
		<div id='calendar'></div>
	</body>
</html>
